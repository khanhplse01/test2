define("tpaGalleries",["lodash","utils","core","santaProps","coreUtils","skins","tpa","color"],function(e,i,t,r,o,n,s,a){return function(e){var i={};function t(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)t.d(r,o,function(i){return e[i]}.bind(null,o));return r},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=1823)}({0:function(i,t){i.exports=e},1:function(e,t){e.exports=i},134:function(e,i,t){var r,o;r=[t(0),t(2),t(1),t(3)],void 0===(o=function(e,i,t,r){"use strict";return{mixins:[i.compMixins.compStateMixin(function(i){return{currentIndex:e.get(i,"currentIndex",0),isPlaying:e.get(i,"isPlaying")}})],propTypes:{id:r.Types.Component.id.isRequired,compProp:r.Types.Component.compProp.isRequired,compData:r.Types.Component.compData.isRequired,sendPostMessage:r.Types.TPA.sendPostMessage.isRequired,mainPageId:r.Types.mainPageId.isRequired},componentDidMount:function(){this._itemChangedCallbacksToInvokeOnce=[]},processItemChanged:function(i){var r=i.args[0],o=this.props.compData.items[r],n=this.props.id;this.props.handleAction({type:"comp",name:t.constants.ACTION_TYPES.IMAGE_CHANGED,sourceId:n,pageId:this.props.mainPageId},function(e,i,r){return{item:e,timeStamp:t.performance.now(),imageIndex:i,name:r}}(o,r,t.constants.ACTION_TYPES.IMAGE_CHANGED)),this.currentIndex!==r&&(this.setState({currentIndex:r}),e.invokeMap(this._itemChangedCallbacksToInvokeOnce,Function.call),this._itemChangedCallbacksToInvokeOnce=[])},getInitialState:function(){return{currentIndex:0,isPlaying:this.props.compProp.autoplay}},componentWillReceiveProps:function(i){var t=this.props.compProp.autoplay;e.isUndefined(t)||t===i.compProp.autoplay||this.setState({isPlaying:i.compProp.autoplay})},sendCommandMessage:function(e){if(this.isAlive&&this.componentInIframeReady){var i={params:{cmd:e},eventType:"SETTINGS_UPDATED",intent:"addEventListener"};this.props.sendPostMessage(this,i)}},next:function(e){this._itemChangedCallbacksToInvokeOnce.push(e),this.sendCommandMessage("next",e)},prev:function(e){this._itemChangedCallbacksToInvokeOnce.push(e),this.sendCommandMessage("previous",e)}}}.apply(i,r))||(e.exports=o)},1823:function(e,i,t){var r,o;r=[t(1825),t(1831),t(1826),t(1827),t(1828),t(1829),t(1830),t(1824),t(1832),t(1833),t(1834),t(2),t(7),t(1835)],void 0===(o=function(e,i,t,r,o,n,s,a,l,p,c,d,m,u){"use strict";var f={masonry:e,accordion:i,impress:t,freestyle:r,collage:o,honeycomb:n,stripShowcase:s,stripSlideshow:a,thumbnails:l,tpa3DGallery:p,tpa3DCarousel:c};return d.compRegistrar.register("tpa.viewer.components.Masonry",f.masonry).register("tpa.viewer.components.Accordion",f.accordion).register("tpa.viewer.components.Impress",f.impress).register("tpa.viewer.components.Freestyle",f.freestyle).register("tpa.viewer.components.Collage",f.collage).register("tpa.viewer.components.Honeycomb",f.honeycomb).register("tpa.viewer.components.StripShowcase",f.stripShowcase).register("tpa.viewer.components.StripSlideshow",f.stripSlideshow).register("tpa.viewer.components.Thumbnails",f.thumbnails).register("wysiwyg.viewer.components.tpapps.TPA3DGallery",f.tpa3DGallery).register("wysiwyg.viewer.components.tpapps.TPA3DCarousel",f.tpa3DCarousel),m.skinsMap.addBatch(u),f}.apply(i,r))||(e.exports=o)},1824:function(e,i,t){var r,o;r=[t(3),t(69),t(134)],void 0===(o=function(e,i,t){"use strict";return{displayName:"StripSlideshowGallery",propTypes:{screenSize:e.Types.screenSize.isRequired},isScreenWidth:function(){return!0},mixins:[i,t],statics:{behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"StripSlideshow"},getStyleProps:function(){return{titleColor:"color1",descriptionColor:"color2",backgroundColor:"color3"}}}}.apply(i,r))||(e.exports=o)},1825:function(e,i,t){var r,o;r=[t(0),t(69)],void 0===(o=function(e,i){"use strict";var t={textColor:"#000",descriptionColor:"#000",textBackgroundColor:"#fff",backgroundMouseoverColor:"#000",alphaBackgroundMouseoverColor:.4};return{displayName:"MasonryGallery",mixins:[i],getGalleryType:function(){return"Masonry"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",backgroundMouseoverColor:"color4",textButtonColor:"color5"}},patchMessageProps:function(i,r){var o=this.getStyleData(r);o.version&&1!==parseInt(o.version,10)||e.assign(i,t)}}}.apply(i,r))||(e.exports=o)},1826:function(e,i,t){var r,o;r=[t(69),t(134)],void 0===(o=function(e,i){"use strict";return{displayName:"ImpressGallery",mixins:[e,i],statics:{behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Impress"},getStyleProps:function(){return{bcgColor1:"color1",bcgColor2:"color2",bcgColor3:"color3",bcgColor4:"color4",bcgColor5:"color5",textColor:"color6",descriptionColor:"color7",textBackgroundColor:"color8"}}}}.apply(i,r))||(e.exports=o)},1827:function(e,i,t){var r,o;r=[t(69)],void 0===(o=function(e){"use strict";return{displayName:"FreestyleGallery",mixins:[e],getGalleryType:function(){return"Freestyle"},getStyleProps:function(){return{borderColor:"color1"}}}}.apply(i,r))||(e.exports=o)},1828:function(e,i,t){var r,o;r=[t(69)],void 0===(o=function(e){"use strict";return{displayName:"CollageGallery",mixins:[e],isScreenWidth:function(){return this.props.compProp.fitToScreenWidth},getGalleryType:function(){return"Collage"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",backgroundMouseoverColor:"color3"}},getOverrideParams:function(e){return e.maxImageSize>e.numOfCells&&(e.maxImageSize=e.numOfCells),e.minImageSize>e.maxImageSize?e.minImageSize=e.maxImageSize:e.maxImageSize<e.minImageSize&&(e.maxImageSize=e.minImageSize),e}}}.apply(i,r))||(e.exports=o)},1829:function(e,i,t){var r,o;r=[t(0),t(69),t(3)],void 0===(o=function(e,i,t){"use strict";return{displayName:"HoneycombGallery",mixins:[i],propTypes:{compProp:t.Types.Component.compProp.isRequired},getGalleryType:function(){return"Honeycomb"},debounceIframe:e.debounce(function(e,i){this.sendIframeMessage(e,i,this.props)},400),shouldDebounceIframe:function(e){return e.numOfColumns!==this.props.compProp.numOfColumns},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",backgroundMouseoverColor:"color4",holesColor:"color5"}}}}.apply(i,r))||(e.exports=o)},1830:function(e,i,t){var r,o;r=[t(3),t(69),t(134)],void 0===(o=function(e,i,t){"use strict";return{displayName:"StripShowcaseGallery",mixins:[i,t],propTypes:{screenSize:e.Types.screenSize.isRequired},isScreenWidth:function(){return!0},statics:{behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"StripShowcase"},getStyleProps:function(){return{}}}}.apply(i,r))||(e.exports=o)},1831:function(e,i,t){var r,o;r=[t(69)],void 0===(o=function(e){"use strict";return{displayName:"AccordionGallery",mixins:[e],getGalleryType:function(){return"Accordion"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",borderColor:"color4"}}}}.apply(i,r))||(e.exports=o)},1832:function(e,i,t){var r,o;r=[t(69),t(134)],void 0===(o=function(e,i){"use strict";return{displayName:"ThumbnailsGallery",mixins:[e,i],statics:{behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Thumbnails"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3"}}}}.apply(i,r))||(e.exports=o)},1833:function(e,i,t){var r,o;r=[t(69),t(134)],void 0===(o=function(e,i){"use strict";return{displayName:"TPA3DGallery",mixins:[e,i],statics:{behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Slicebox"},getStyleProps:function(){return{}}}}.apply(i,r))||(e.exports=o)},1834:function(e,i,t){var r,o;r=[t(69),t(134)],void 0===(o=function(e,i){"use strict";return{displayName:"TPA3DCarouselGallery",mixins:[e,i],statics:{behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Carousel"},getHeight:function(){return.33*this.props.style.width},getStyleProps:function(){return{}}}}.apply(i,r))||(e.exports=o)},1835:function(e,i,t){var r;void 0===(r=function(){"use strict";var e={"wysiwyg.viewer.skins.TPA3DCarouselSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPA3DGallerySkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAAccordionSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPACollageSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAEcomGallerySkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAFreestyleSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAHoneycombSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAImpressSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAMasonrySkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAStripShowcaseSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAStripSlideshowSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAThumbnailsSkin":{react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowtransparency:"true"}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}}};return e}.apply(i,[]))||(e.exports=r)},2:function(e,i){e.exports=t},3:function(e,i){e.exports=r},4:function(e,i){e.exports=o},44:function(e,i){e.exports=s},62:function(e,i){e.exports=a},69:function(e,i,t){var r,o;r=[t(0),t(2),t(1),t(44),t(62),t(4),t(3)],void 0===(o=function(e,i,t,r,o,n,s){"use strict";var a=t.linkRenderer,l=i.compMixins,p=r.tpaMixins,c={ExternalLink:"WEBSITE",EmailLink:"EMAIL",PageLink:"PAGE",DocumentLink:"DOCUMENT",AnchorLink:"ANCHOR",DynamicPageLink:"DYNAMIC_PAGE_LINK"};function d(i,r,n){var s=void 0,a=void 0,l={};return e.forEach(r,function(p,c){s=t.colorParser.getColorValue(i,n[r[c]]),l[c]=e.includes(s,",")?function(e){var i=e.split(",");return o({r:i[0],g:i[1],b:i[2]}).hexString()}(s):s,a=n["alpha-"+r[c]],e.isUndefined(a)||(l["alpha"+t.stringUtils.capitalize(c)]=a)}),l}function m(i,r,o){return e.map(i,function(i){return function(i,r,o){return i=i.link?e.merge({},i,a.renderLink(i.link,r,o),{linkType:c[i.link.type]}):i,e.assign(i,{description:t.xss.filterHtmlString(i.description),title:t.xss.filterHtmlString(i.title)})}(i,r,o)})}function u(i){return e.map(i,function(i){return e.omit(i,"quality")})}return{mixins:[l.skinBasedComp,p.tpaUrlBuilder,p.tpaCompApi,l.skinInfo],statics:{compSpecificIsDomOnlyOverride:function(){return!1}},propTypes:{id:s.Types.Component.id.isRequired,compProp:s.Types.Component.compProp.isRequired,compData:s.Types.Component.compData.isRequired,linkRenderInfo:s.Types.Link.linkRenderInfo.isRequired,rootNavigationInfo:s.Types.Component.rootNavigationInfo.isRequired,navigateToPage:s.Types.navigateToPage.isRequired,compTheme:s.Types.Component.theme.isRequired,style:s.Types.Component.style.isRequired,structure:s.Types.Component.structure.isRequired,sendPostMessage:s.Types.TPA.sendPostMessage.isRequired,santaBase:s.Types.santaBase.isRequired,isDebugMode:s.Types.isDebugMode.isRequired,globalImageQuality:s.Types.globalImageQuality.isRequired,mainPageId:s.Types.mainPageId.isRequired,THEME_DATA:s.Types.Theme.THEME_DATA.isRequired,isPlayingAllowed:s.Types.RenderFlags.isPlayingAllowed.isRequired,tpaComponentsDomAspect:s.Types.SiteAspects.tpaComponentsDomAspect.isRequired,isMobileView:s.Types.isMobileView.isRequired,isExperimentOpen:s.Types.isExperimentOpen},messageSent:!1,isAlive:!1,componentInIframeReady:!1,processImageZoom:function(i){var r=i.args[0],o=this.props.compData.items[r],n=this.props.compData.id,s=a.renderImageZoomLink(this.props.linkRenderInfo,this.props.rootNavigationInfo,o,n,void 0,this.props.id);if(this.props.rootNavigationInfo.pageItemId!==o.id){var l=a.getLinkUrlFromLinkProps(s),p=e.defaults({pageItemAdditionalData:s["data-page-item-context"]},t.wixUrlParser.parseUrl(this.props.linkRenderInfo,l));this.props.navigateToPage(p)}},processItemClicked:function(e){var i=e.args[0],r=this.props.compData.items[i],o=this.props.id;this.props.handleAction({type:"comp",name:t.constants.ACTION_TYPES.ITEM_CLICKED,sourceId:o,pageId:this.props.mainPageId},function(e,i,r){return{item:e,timeStamp:t.performance.now(),imageIndex:i,name:r}}(r,i,t.constants.ACTION_TYPES.ITEM_CLICKED))},getInitialState:function(){return this.currStyle=this.props.compTheme,this.lastRenderedStyleData={},{height:this.props.style.height}},setAppIsAlive:function(){this.isAlive=!0,this.askToSendIframeMessage(this.props),this.props.tpaComponentsDomAspect.markComponentIsAlive(this.props.id)},setComponentInIframeReady:function(){this.messageSent=!1,this.componentInIframeReady=!0,this.askToSendIframeMessage(this.props)},askToSendIframeMessage:function(e){var i=e.compProp,t=e.compData;this.debounceIframe&&this.shouldDebounceIframe&&this.shouldDebounceIframe(i)?this.debounceIframe(i,t,e):this.sendIframeMessage(i,t,e)},sendIframeMessage:function(i,t,r){var o=void 0;if(this.isAlive&&this.componentInIframeReady&&!this.messageSent){var n=this.getOverrideParams?this.getOverrideParams(i):i,s=this.getStyleData(r);o=function(i,t,r,o,n){return{params:{props:e.merge({},i,d(r.THEME_DATA,o,n)),quality:r.globalImageQuality,marketingLandingPage:r.isExperimentOpen("sv_marketingLandingPage"),items:m(t,r.linkRenderInfo,r.rootNavigationInfo),mainPageId:r.mainPageId},eventType:"SETTINGS_UPDATED",intent:"addEventListener"}}(n,t.items,r,this.getStyleProps(),s),this.patchMessageProps&&this.patchMessageProps(o.params.props,r),this.props.sendPostMessage(this,o),this.lastRenderedStyleData=s,this.messageSent=!0}},shouldRenderIframe:function(i){var t=u(m(i.compData.items,i.linkRenderInfo,i.rootNavigationInfo)),r=u(this.props.compData.items),o=this.props.globalImageQuality,n=!e.isEqual(o,i.globalImageQuality)||e.every(this.props.compData.items,function(i){return!(e.isEqual(i.quality,o)||e.isEmpty(i.quality)&&e.isEmpty(o))}),s=!e.isEqual(i.compProp,this.props.compProp)||!e.isEqual(r,t)||n||!e.isEqual(this.getStyleData(i),this.lastRenderedStyleData);return s},componentWillReceiveProps:function(i){var t=i.compTheme;e.isEqual(this.currStyle,t)||(this.currStyle=t,this.messageSent=!1),this.shouldRenderIframe(i)&&(this.messageSent=!1),e.isEqual(i.style.height,this.props.style.height)||this.setState({height:i.style.height}),this.askToSendIframeMessage(i),this.isPlayingAllowed!==i.isPlayingAllowed&&(this.isPlayingAllowed=i.isPlayingAllowed,this.sendEditModeMessage(this.isPlayingAllowed?"site":"editor"))},sendEditModeMessage:function(e){if(this.isAlive&&this.componentInIframeReady){var i={params:{editMode:e},eventType:"EDIT_MODE_CHANGE",intent:"addEventListener"};this.props.sendPostMessage(this,i)}},getSkinProperties:function(){var i=this.getHeight?this.getHeight():this.state.height||0;return{"":{style:{height:i,display:"table",minWidth:10,minHeight:10}},iframe:{style:{height:i,width:this.props.isMobileView?e.get(this.props,"structure.layout.width","100%"):"100%",position:"relative",minHeight:10,minWidth:10},className:"tpa-gallery-"+this.getGalleryType(),"data-src":function(e,i,t,r){return t(n.urlUtils.joinURL(e,"/node_modules/santa-galleries/"+(r?"src/":"target/"))+i+"/"+i+".html",["compId","deviceType","locale","viewMode"])}(this.props.santaBase,this.getGalleryType(),this.buildUrl,this.props.isDebugMode)}}}}}.apply(i,r))||(e.exports=o)},7:function(e,i){e.exports=n}})});
//# sourceMappingURL=tpaGalleries.min.js.map